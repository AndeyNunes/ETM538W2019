---
title: "Homework 1"
author:
   - Andey Nunes, MS
   - additional team member name(s) here
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: pdf_document
---

## Document Setup
The first step for this week is to set up the R Markdown document options.
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

packages <- c("broom", "pander", "readxl", "tidyverse")
lapply(packages, require, character.only = T)

options(digits = 2, scipen = 999, stringsAsFactors = F)
```

Next step, load the data sets for the homework and summarize.

```{r load data}
catalog <- read_excel("catalog.xls")
customers <- read_excel("customers.xls")
order_lines <- read_excel("order_lines.xls")
orders <- read_excel("orders.xls")
```
### Summary tables
```{r summaries}

catalog_summary <- summary(catalog)
glimpse(catalog)
pander(catalog_summary, caption = "catalog summary table")

customers_summary <- summary(customers)
glimpse(customers)
pander(customers_summary, caption = "customers summary table")

order_lines_summary <- summary(order_lines)
glimpse(order_lines)
pander(order_lines_summary, caption = "order_lines summary table")

orders_summary <- summary(orders)
glimpse(orders)
pander(orders_summary, caption = "orders summary table")
```

| column names (variables) | assign a type: “question”, “answer”, or “link”  | variable class | count missing values | range = max - min |

#### This section is for building some custom functions that will come in handy later
```{r custom functions}
countNA <- function(x) {sum(is.na(x)) }
get_range <- function(x) {ifelse(is.numeric(x), diff(range(x)), NA)}

# This function creates the generic structure for the tables in Part B. The only content is the variable names, all the other columns are empty and can be updated in the homework.
make_partBtable <- function(x){
   df <- tibble(variable_name = names(x),
                    variable_type = NA, # assign one of: "question", "answer", "link"
                    variable_class = map(x, class),
                    count_missing = map_int(x, countNA),
                    variable_range = map_dbl(x, get_range))
   
   return(df)

}
```



## Homework Questions

### Part B: Specific Questions

In an effort to code more efficiently I've defined a function to produce each table, however, I ran into a problem with the `variable_class` column. Compare the tables below with the class reported in the summary/glimpse tables above and you will see.

```{r catalog table}
catalog_table <- make_partBtable(catalog)
pander(catalog_table, caption = "Catalog Data Table Details")
```


```{r customers table}
customers_table <- make_partBtable(customers)
pander(customers_table, caption = "Customers Data Table Details")
```


```{r order_lines table}
order_lines_table <- make_partBtable(order_lines)
pander(order_lines_table, caption = "Order_lines Data Table Details")
```

```{r orders table}

orders_table <- make_partBtable(orders)
pander(orders_table, caption = "Orders Data Table Details")
```

## References
